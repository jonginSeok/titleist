<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>판매통계-항공예약현황</title>
<link rel="stylesheet" type="text/css" href="/css/style.css" />
<link rel="stylesheet" type="text/css" href="/css/vof_contents.css" />
<link rel="stylesheet" type="text/css" href="/css/ui.jqgrid.css" />
<link rel="stylesheet" type="text/css" href="/css/jquery-ui-1.8.24.custom.css" />
<!-- 
<link rel="stylesheet" type="text/css" href="/css/style.css" />
<link rel="stylesheet" type="text/css" href="/css/contents.css" />
 -->
<link rel="stylesheet" type="text/css" href="/css/popup.css" />
<link rel="stylesheet" type="text/css" href="/css/board.css" />

<script type="text/javascript" src="/js/plugin/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="/js/plugin/XSLTransform.js"></script>
<script type="text/javascript" src="/js/plugin/jquery.jqGrid.min.js"></script>
<script type="text/javascript" src="/js/lib/jquery.com.datepicker.js"></script>
<script type="text/javascript" src="/js/lib/jquery.com.grid.js"></script>
<script type="text/javascript" src="/js/lib/jquery.com.pager.js"></script>
<script type="text/javascript" src="/js/lib/jquery.com.util.js"></script>
<script type="text/javascript" src="/js/lib/jquery.com.js"></script>
<script type="text/javascript" src="/js/plugin/jquery-ui-1.8.24.custom.js"></script>

<script type="text/javascript">
var $k1 = jQuery.noConflict();
var reservSt = {0:"미처리", 1:"처리중", 2:"발권대상", 3:"발권완료", 4:"미결제발권완료"};

$k1(document).ready(function() {
	//그리드 생성
	gfnGridInit();
	
	//button event
	gfnButtonEvent();
});
//그리드 생성
function gfnGridInit(state){
	//Grid title 
	var gTitle = ['번호', '지점', '예약번호', '구분', '예약일자', 'TL일자', '항공사', '인원수', '여정', '항공운임', '예약구분', '예약상태'];
	//Grid Model 
	var gModel = [
					{name:'num',index:'num', width:45, align:"center"},
			   		{name:'branch',index:'branch', width:46, align:"center"},
			   		{name:'reservNo',index:'reservNo', width:86, align:"center"},
			   		{name:'division',index:'division', width:47, align:"center"},
			   		{name:'reservDate',index:'reservDate', width:86, align:"center"},
			   		{name:'tlDate',index:'tlDate', width:86, align:"center"},
			   		{name:'airComp',index:'airComp', width:63, align:"center"},		
			   		{name:'person',index:'person', width:64, align:"center"},		
			   		{name:'schedule',index:'schedule', width:149, align:"center"}, 		
			   		{name:'airCharge',index:'airCharge', width:80, align:"center"}, 		
			   		{name:'reservDi',index:'reservDi', width:81, align:"center"}, 		
			   		{name:'reservSt',index:'reservSt', width:132, align:"center", formatter:'select', editoptions:{value:reservSt}}	
			   	];
	
	var options = 	{
		multiselect:true,
		height : '200', 
		width : '1500', 
		rowNum:20,
	   	rowList:[],
	   	xmlReader: {
			root : "data",
			row: "list", 
			page: "data>page", 			
		    total: "data>total", 		
		    records : "data>records", 	
			repeatitems: false,
			id: "num"
			}
	};
	
	//이벤트 생성	
	var events = {loadComplete:gfnLoadComplete, afterInsertRow:gfnAfterInsertRow};

	//기본 그리드 생성
	$k1("#tbl_grid").grid('/manual/xsl/AIRSTAGPG0100000750.xml', gTitle, gModel, options, events);
	$k1("#tbl_grid2").grid('', gTitle, gModel, options, events);
	gfnLoadComplete();
}
//그리드가 다 그려진 후 fn
function gfnLoadComplete(data){
	//그리드 Scroll 넓이 지정
	var searchWidth = $k1.util.intSize($k1('.cont_wrap').css('width'), 'px');	
	$k1("#tbl_grid").setGridWidth(searchWidth,false);
	$k1("#tbl_grid2").setGridWidth(searchWidth,false);

	//그리드 스타일 지정
	$k1("#tbl_grid").grid('setGridStyle', 'vof_list');
	$k1("#tbl_grid2").grid('setGridStyle', 'vof_list');
	
	//폰트 색상 변경
	ret = jQuery("#list15").jqGrid('getRowData',"13");

	//Paging 
	var currentPage = $k1('#tbl_grid').grid('getGridParam', 'page');		//현재 페이지
	var pageSize = $k1('#tbl_grid').grid('getGridParam', 'rowNum');			//한 페이지당 보여 주는 row수
	var pageTotal = $k1('#tbl_grid').grid('getGridParam', 'records');		//총 row 수
	var pageBlock = 10;														//block으로 보여 주는 page 수
	var url = $k1('#tbl_grid').grid('getGridParam', 'url');					//페이지 이동시 url
	var formid = '';														//페이지 이동시 param으로 넘겨야 하는 form id
	
	$k1(".k1_page_num").pager({pageSize: pageSize, 
								pageBlock: pageBlock, 
								currentPage: currentPage, 
								pageTotal: pageTotal, 
								url:url, 
								formid:formid
								}, {type:'grid', id:'tbl_grid', style:'vof_list'});
}
//폰트 색상을 변경한다.
function gfnAfterInsertRow(rowid, aData){
	//예약상태의 값을 가져와서 폰트 색상을 변경한다.
	switch(aData.reservSt){
		case "0" :
		$k1("#tbl_grid").jqGrid('setCell',rowid,'reservSt','',{color:'blue'});
		break;
		case "1" :
		$k1("#tbl_grid").jqGrid('setCell',rowid,'reservSt','',{color:'red'});
		break;
	}
}
//event 등록
function gfnButtonEvent(){
	// 복사
	$k1("#copy").click(function(){
		$k1("#tbl_grid").grid("dataCopy", "tbl_grid2");
		$k1("#tbl_grid2").grid('setGridStyle', 'vof_list');
	});
}
</script>
</head>
<body>
<div id="k1_content_wrap">	
	<!-- //content -->			
	<div class="cont_bg">
		<div class="cont_wrap">
			<div class="k1_mt10">
                <table id="tbl_grid"></table>
                	<button id="copy" style="width:400px; height:50px;">복사</button>
                <table id="tbl_grid2"></table>	
            </div>
            <div class="k1_page_num">
			</div>
		</div>
	</div>
	<!-- //content -->
</div>
</body>
</html>
