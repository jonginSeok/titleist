<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?libraries=places&sensor=false"></script>
<script src="/js/plugin/jquery-1.7.2.min.js" type="text/javascript"></script>
<script src="/js/lib/jquery.com.js" type="text/javascript"></script> 
<script src="/js/lib/jquery.com.util.js" type="text/javascript"></script>
<script src="/js/lib/jquery.com.map.js" type="text/javascript"></script>

<script type="text/javascript">
var $k1 = jQuery.noConflict();
var nowAddress = unescape(location.href);
var parameters = (nowAddress.slice(nowAddress.indexOf('?')+1,nowAddress.length)).split('&');

var hotelDetail = {};
for(var i = 0;i < parameters.length;i++){
	hotelDetail[parameters[i].split('=')[0]] = parameters[i].split('=')[1];
}

$k1(document).ready(function() {
	$k1.gmap.mapInit('mapDiv', {lat : hotelDetail.lat, lng : hotelDetail.lng, zoom : 17, mapSize : 'normal'});
	$k1.gmap.mapInit('infoMapDiv', {lat : hotelDetail.lat, lng : hotelDetail.lng, zoom : 13, mapSize : 'normal'});
	//$k1.gmap.mapInit('streetDiv', {lat : hotelDetail.lat, lng : hotelDetail.lng, mapSize : 'normal'});
	
	var markerOption = {
			markerType : 'hotel',
			id : hotelDetail.id, 
			lat : hotelDetail.lat, 
			lng : hotelDetail.lng,			    
			type : '',
			intro : hotelDetail.intro,
			img : "/imgs/map/htl/hotel_" + (i+1) + ".jpg",
			price : hotelDetail.price,
			ratio : hotelDetail.ratio,
			name : hotelDetail.name,
			target : 'mapDiv'
	};
		
	$k1.gmap.addMarker(markerOption);
	
	//markerOption = {
	//		markerType : 'hotel',
	//		id : hotelDetail.id, 
	//		lat : hotelDetail.lat, 
	//		lng : hotelDetail.lng,			    
	//		type : '',
	//		intro : hotelDetail.intro,
	//		img : "/vof/wfw/imgs/map/htl/hotel_" + (i+1) + ".jpg",
	//		price : hotelDetail.price,
	//		ratio : hotelDetail.ratio,
	//		name : hotelDetail.name,
	//		target : 'streetDiv'
	//};
	//$k1.gmap.addMarker(markerOption);
	
	var streetViewOption = {
		lat : hotelDetail.lat, 
		lng : hotelDetail.lng,
		target : 'streetDiv'
	};
	//$k1.gmap.openStreetView(streetViewOption);	//지도위에 street view표시할 때 사용
	$k1.gmap.setStreetView(streetViewOption);	//지도없이 street view 만 표시할 때 사용

	$k1('#printmap').bind('click', function() {
		var url = $k1.gmap.printMap('mapDiv');
		console.log(url);
		//window.open('gmapprint.html?url=' + url);
	});
	
	$k1('#chk_hotel').bind('click', function() {		
		if($k1(this).is(':checked')) {
			var option = {
				markerType : 'hotel',
				id : hotelDetail.id, 
				lat : hotelDetail.lat, 
				lng : hotelDetail.lng,			    
				type : '',				
				target : 'infoMapDiv'
			};
			$k1.gmap.addMarker(option);
		} else $k1.gmap.removeMarkers('infoMapDiv', 'hotel');			
	});
	
	$k1('#chk_traffic').bind('click', function() {		
		if($k1(this).is(':checked')) $k1.gmap.getPlaceLibrary('infoMapDiv', 'traffic');	
		else $k1.gmap.removeMarkers('infoMapDiv', 'traffic');			
	});
});
</script>
</head>
<body>
	<table>
		<tr>
			<td>
				호텔 상세
				<div style="width:300px;height:200px;">내용</div>
			</td>
			<td>
				주변정보
				<input id="chk_hotel" type="checkbox" value="1"/>호텔위치
				<input id="chk_traffic" type="checkbox" value="1"/>교통
				<div id="infoMapDiv" style="width:300px;height:300px;"></div>
			</td>
		</tr>
		<tr>
			<td>
				지도<input id="printmap" type="button" value="지도인쇄"/>
				<div id="mapDiv" style="width:300px;height:300px;"></div>				 				
			</td>
			<td>
				스트리트뷰
				<div id="streetDiv" style="width:300px;height:300px;"></div>	
			</td>
		</tr>
	</table>
</body>
</html>