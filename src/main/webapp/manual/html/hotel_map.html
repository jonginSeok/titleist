<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>호텔검색</title>
<link rel="Stylesheet" type="text/css" href="/css/style.css" />
<link rel="Stylesheet" type="text/css" href="/css/vof_contents.css" />
<link rel="stylesheet" type="text/css" href="/css/ui.jqgrid.css" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- <script type="text/javascript" src="https://maps.google.com/maps/api/js?sensor=false"></script> -->
<!-- <script src="/js/lib/jquery.com.uitab.js" type="text/javascript"></script>
<script src="/js/lib/jquery.com.pager.js" type="text/javascript"></script> -->
<!-- <script src="/js/lib/jquery.com.grid.js" type="text/javascript"></script> -->
<!-- <script src="/js/plugin/XSLTransform.js" type="text/javascript"></script>
<script src="/js/plugin/jquery.jqGrid.min.js" type="text/javascript"></script> -->
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?libraries=places&sensor=false"></script>
<script src="/js/plugin/jquery-1.7.2.min.js" type="text/javascript"></script>
<script src="/js/plugin/jquery.blockUI.js" type="text/javascript"></script>
<script src="/js/lib/jquery.com.util.js" type="text/javascript"></script>
<script src="/js/lib/jquery.com.js" type="text/javascript"></script> 
<script src="/js/lib/jquery.com.map.js" type="text/javascript"></script>
<script src="/js/plugin/jquery.simplemodal.js" type="text/javascript"></script>
<script src="/js/lib/jquery.com.datepicker.js" type="text/javascript"></script>
<script type="text/javascript">
var $k1 = jQuery.noConflict();
var cityLocation = {};
var hotelData = [
	{id : 'hotelA', name : 'Star Hotel Yokohama', price : '120,000', ratio : '5', lat : '35.4568951', lng : '139.63518350000004', type : 'H', intro : 'aaaaa'}
  , {id : 'hotelB', name : 'camelot japan yokohama hotel', price : '50,000', ratio : '4', lat : '35.44644359999999', lng : '139.63672829999996', type : 'H', intro : 'bbbbb'}
  , {id : 'hotelC', name : 'the pan pacific hotel yokohama', price : '35,000', ratio : '3', lat : '35.4437078', lng : '139.6380256', type : 'H', intro : 'ccccc'}
  , {id : 'landD', name : 'Landmark', price : '', ratio : '', lat : '35.4548426', lng : '139.64404409999997', type : 'L', intro : ''}
];
	


$k1(document).ready(function() {
	var mapOptions = {};
	$k1.gmap.geocode('요코하마시', function(results, status){
		/* status
		ERROR : There was a problem contacting the Google servers.
		INVALID_REQUEST : This GeocoderRequest was invalid.
		OK : The response contains a valid GeocoderResponse.
		OVER_QUERY_LIMIT : The webpage has gone over the requests limit in too short a period of time.
		REQUEST_DENIED : The webpage is not allowed to use the geocoder.
		UNKNOWN_ERROR : A geocoding request could not be processed due to a server error. The request may succeed if you try again.
		ZERO_RESULTS : No result was found for this GeocoderRequest.
		*/	
		if(status == 'OK'){
			mapOptions = {
					location : results[0].geometry.location,
				    mapSize : 'small',
				    zoom : 13
			};
			cityLocation['lat'] = results[0].geometry.location.lat();
			cityLocation['lng'] = results[0].geometry.location.lng();
			//맵 로드
			$k1.gmap.mapInit('googlemap', mapOptions);	
		
			init();
		}
	});
	
	$k1('#search').bind('click', function() {		
		$k1.gmap.removeAllMarkers('googlemap');		
		init();
		//$k1('#googlemap').css('display', 'none');
	});
	
	$k1('#googlemap').bind('click', function() {		
		$k1.popup.modal('hotel_map_pop.html', {}, {width:965, height:500}, null);
	});
	
	var html = '';
	for(var i = 0;i < hotelData.length;i++){
		if(hotelData[i].type == 'L') continue;
		var param = 'id=' +  hotelData[i].id
				  + '&name=' +  hotelData[i].name
				  + '&price=' +  hotelData[i].price
				  + '&ratio=' +  hotelData[i].ratio
				  + '&lat=' +  hotelData[i].lat
				  + '&lng=' +  hotelData[i].lng
				  + '&intro=' +  hotelData[i].intro;
		html += '<tr><td>';
		html += '<table>';
		html += '<tr>';
		html += '<td>';
		html += '<img src="/imgs/map/hotel_' + (i+1) + '.jpg" width="200">';
		html += '</td>';
		html += '<td>';
		html += '<b>' + hotelData[i].name + '</b><br/><br/>';
		html += hotelData[i].intro + '<br/><br/>';
		html += '<a href="hotel_map_detail.html?' + param + '">상세보기</a>';
		html += '</td>';
		html += '</tr>';
		html += '</table>';
		html += '</td></tr>';
	}
	$k1('#hotelList').html(html);	
});

function init(){	
	for(var i = 0;i < hotelData.length;i++){		
		var markerOption = {				
				id : hotelData[i].id, 
				lat : hotelData[i].lat, 
				lng : hotelData[i].lng,			    
				type : hotelData[i].type,
				target : 'googlemap'	//해당지도의 div id
		};
			
		$k1.gmap.miniMapAddMarker(markerOption);
	}
}
</script>
</head>
<body>
	<!-- <table width="1200px"> -->
	<table>
		<tr>	
			<td width="300px">
				menu
				<div id="googlemap" style="width:100%;height:800px;margin-top:10px;"></div>
				<input type="button" id="search" value="검색"/>
			</td>
			<td width="">
				<table id="hotelList">
				
				</table>			
			</td>
		</tr>
	</table>
</body>
</html>